<html>
<head>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@500&family=Roboto:wght@300;400&display=swap"
          rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            background: #101044;
            overflow: hidden;
            font-family: /*Safari for OS X and iOS (San Francisco)*/ -apple-system,
                /*Chrome < 56 for OS X (San Francisco)*/ BlinkMacSystemFont,
                /*Windows*/ "Segoe UI",
                /*Android*/ "Roboto",
                /*Basic web fallback */ "Helvetica Neue", Arial, sans-serif,
                /*Emoji fonts*/ "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }

        #container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            font-size: 2rem;
        }

        #content {
            max-width: 700px;
            transition-timing-function: ease-in;
            transition-duration: 3s;
            transition-property: transform;
            transform-origin: center;
        }

        h1 {
            font-family: 'Caveat', cursive;
            font-weight: 400;
            margin: 0;
            color: white;
        }

        h2 {
            font-weight: 300;
            font-size: 20px;
            color: white;
        }

        strong {
            font-weight: 700;
        }

        textarea, button, input, input[type=text] {
            font-family: inherit;
            font-size: 16px;
        }

        textarea {
            width: 100%;
            padding: 25px;
            color: white;
            background-color: transparent;
            border: white solid 3px;

            grid-column-start: span 2;
        }

        input {
            padding: 25px;
            color: white;
            background-color: transparent;
            border: white solid 3px;
            font-size: 13px;
        }

        input[type=text] {
            word-wrap: break-word;
            word-break: break-all;
        }

        button {
            padding: 25px;
            border: white solid 3px;
            background-color: transparent;
            color: white;
        }

        button:hover:enabled {
            background-color: white;
            color: #101044;
        }

        .inputgrid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, auto);
            grid-gap: 15px;
        }
        @media (max-width: 800px) {
            .inputgrid {
                grid-template-columns: repeat(1, 1fr);
                grid-template-rows: repeat(3, auto);
            }
            textarea {
                grid-column-start: span 1;
            }
        }
    </style>
</head>
<body>
<div id="container">
    <div id="content">

        <!--Time flies,-->
        <!--Let's predict where to-->


        <!--We can't predict the future-->
        <!-- But let's do it anyway-->

        <h1>
            2030 <strong>tech</strong> predictions
        </h1>
        <h2>Tech is evolving. Exciting, isn't it?<br/>
            To celebrate we are creating a <b>time capsule</b> packed with <b>tech-related predictions</b>.
            We all write down how we think technology will evolve and publish the predictions at then end of 2030.
            I'm sure you will have a blast looking back at how expectations line up with reality.
            You are invited to add your predictions as well!
        </h2>
        <div class="inputgrid">
            <textarea id="prediction-input" placeholder="I predict..." class="wide" maxlength="256" rows="3"></textarea>
            <input id="author" type="text" placeholder="My name is...   (optional)" maxlength="56"/>
            <button id="send-button">Store prediction for in 10 years</button>
        </div>
    </div>
</div>

<script>
    content = document.getElementById('content');
    sendButton = document.getElementById('send-button');
    predictionInput = document.getElementById('prediction-input');
    authorInput = document.getElementById('author');

    predictionInput.onkeydown = (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
        }
    };

    const examplePredictions = [
        'The browser war will be dominated by opera',
        'The go-to place for tech-questions will still be StackOverflow',
        'Marques Brownlee will surpass PewDiePie in number of subscribers',
        'Angular will have more users than React and Vue combined',
        'Git will have been replaced by something different',
        'Many poor souls are still stuck in vim',
        'Google will encounter a week long global outage',
        'All smartphones will have 4K displays',
        'In 2030 some people live on mars',
        'The first war between humans and AI will be in progress',
        'In 2030 some humans will be immortable with the help of AI',
        'A time-traveler from the future will visit us',
        'In 2030 quantum computers are required to play the latest AAA games',
        'Cognitive technically stimuli will be generally available',
        'Python 4 will be the most celebrated language',
        "I'm going on a spaceday (space holiday) will have been added to the dictionary",
        "AWS will have discontinued EC2 in favor of Lambda's",
        'In 10 years people will still believe VR will be a big thing any moment now',
        'The most prominent used chat application will we Facebook Messenger',
        "Everything with a power plug will be 'smart' by default",
        'All parents will tracking the whereabouts of their children continuously',
        'The number of NPM packages will exceed the amount of grains of sand in an average garden pot',
        'Pace of technology change will increaste exponentionally',
        'Pace of technology change will decreaste slowly',
        'In 2030 the ISS will exclusivly be a hotel',
        'A single bitcoin will be worth 1 mil',
        'Blockchain miners will take up 30%+ of the world\'s energy consumption'
    ];

    sendButton.addEventListener('click', () => {
        inputDisabled(true);
        const prediction = predictionInput.value;
        const author = authorInput.value === "" ? null : authorInput.value;

        if (prediction === "") {
            alert("The prediction paper is still empty. I'm sure you can think of something that will change...");
            inputDisabled(false);
            return;
        }

        fetch("/api", {
            method: "POST",
            body: JSON.stringify({prediction, author})
        }).then(res => {
            if (res.ok) {
                predictionInput.value = '';
                gotoThanks();
            } else {
                console.log(res);
                alert("The prediction could not be added to the time capsule. Try again later.")
            }
            inputDisabled(false);
        })
            .catch((err) => {
                console.log(err);
                alert("Error: The prediction could not be added to the time capsule. Try again later.");
                inputDisabled(false);
            });
    });

    function gotoThanks() {
        content.style.transform = `scale(0, 0)`;
        setTimeout(() => {
            goToInput()
        }, 3000);
    }

    function goToInput() {
        content.style.transitionTimingFunction = 'ease-in';
        content.style.transitionDuration = '0s';
        content.style.transform = `scale(80, 80)`;
        requestAnimationFrame(() => {
            setTimeout(() => {
                content.style.transitionDuration = '3s';
                content.style.transform = `scale(1, 1)`;
                content.style.transitionTimingFunction = 'ease-out';
            }, 1)
        });
    }

    function inputDisabled(disabled) {
        sendButton.disabled = disabled;
    }
</script>

</body>
</html>
